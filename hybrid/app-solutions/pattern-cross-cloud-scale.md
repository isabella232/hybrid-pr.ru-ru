---
title: Шаблон решения для масштабирования в разных облаках в Azure Stack Hub
description: Узнайте, как создать масштабируемое приложение в Azure и Azure Stack Hub.
author: BryanLa
ms.topic: article
ms.date: 11/05/2019
ms.author: bryanla
ms.reviewer: anajod
ms.lastreviewed: 11/05/2019
ms.openlocfilehash: 90e0c177b5eaee4d223b4613e0b2ddf385fa799c
ms.sourcegitcommit: df06f598da09074d387f5f765f7c4237af98fb59
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/17/2021
ms.locfileid: "122281267"
---
# <a name="cross-cloud-scaling-pattern"></a>Шаблон масштабирования в нескольких облаках

Вы можете автоматически добавлять ресурсы в существующее приложение в соответствии с увеличением нагрузки.

## <a name="context-and-problem"></a>Контекст и проблема

Приложение не может увеличить емкость, чтобы удовлетворить непредвиденный рост потребностей в ресурсах. Недостаток масштабируемости приводит к тому, что пользователи не могут обратиться к приложению в периоды пиковой нагрузки. Приложение может обслуживать фиксированное число пользователей.

Международным компаниям требуются безопасные, надежные и доступные облачные приложения. Очень важно своевременно реагировать на увеличение нагрузки и использовать для этого подходящую инфраструктуру. Предприятия прилагают много усилий, чтобы сбалансировать затраты и обслуживание с обеспечением защиты, хранения бизнес-данных и их доступности в реальном времени.

Возможно, вы не сможете запускать приложение в общедоступном облаке. Тем не менее для бизнеса экономически нецелесообразно поддерживать требуемую емкость в своей локальной среде для обработки пиков спроса на приложение. Благодаря этому шаблону можно воспользоваться эластичностью общедоступного облака в локальном решении.

## <a name="solution"></a>Решение

Шаблон масштабирования в нескольких облаках расширяет возможности приложения, расположенного в локальном облаке, с помощью ресурсов общедоступного облака. Шаблон активируется при увеличении или уменьшении нагрузки, соответственно добавляя или удаляя ресурсы в облаке. Эти ресурсы обеспечивают избыточность, высокую доступность и географическую маршрутизацию.

![Шаблон масштабирования в нескольких облаках](media/pattern-cross-cloud-scale/cross-cloud-scaling.png)

> [!NOTE]
> Этот шаблон применяется только к компонентам приложения без отслеживания состояния.

## <a name="components"></a>Компоненты

Шаблон масштабирования в разных облаках состоит из следующих компонентов.

### <a name="outside-the-cloud"></a>За пределами облака

#### <a name="traffic-manager"></a>Диспетчер трафика

На схеме он находится за пределами группы общедоступного облака, но ему нужна возможность координировать трафик как в локальном центре обработки данных, так и в общедоступном облаке. Подсистема балансировки обеспечивает высокую доступность приложения, отслеживая конечные точки и обеспечивая при необходимости перераспределение отработки отказа.

#### <a name="domain-name-system-dns"></a>Служба доменных имен (DNS)

Служба доменных имен, или DNS, отвечает за преобразование (или разрешение) имени веб-сайта или службы в IP-адрес.

### <a name="cloud"></a>Cloud

#### <a name="hosted-build-server"></a>Размещенный сервер сборки

Среда для размещения конвейера сборки.

#### <a name="app-resources"></a>Ресурсы приложения

Ресурсы приложения, поддерживающие горизонтальное уменьшение и увеличение масштаба, такие как масштабируемые наборы виртуальных машин и контейнеры.

#### <a name="custom-domain-name"></a>Имя личного домена

Используйте имя личного домена для стандартной маски запросов маршрутизации.

#### <a name="public-ip-addresses"></a>Общедоступные IP-адреса

Общедоступные IP-адреса используются для передачи входящего трафика через Диспетчер трафика в конечную точку ресурсов общедоступного облачного приложения.  

### <a name="local-cloud"></a>Локальное облако

#### <a name="hosted-build-server"></a>Размещенный сервер сборки

Среда для размещения конвейера сборки.

#### <a name="app-resources"></a>Ресурсы приложения

Ресурсы приложения, поддерживающие горизонтальное уменьшение и увеличение масштаба, такие как масштабируемые наборы виртуальных машин и контейнеры.

#### <a name="custom-domain-name"></a>Имя личного домена

Используйте имя личного домена для стандартной маски запросов маршрутизации.

#### <a name="public-ip-addresses"></a>Общедоступные IP-адреса

Общедоступные IP-адреса используются для передачи входящего трафика через Диспетчер трафика в конечную точку ресурсов общедоступного облачного приложения.

## <a name="issues-and-considerations"></a>Проблемы и рекомендации

При принятии решения о реализации этого шаблона необходимо учитывать следующие моменты.

### <a name="scalability"></a>Масштабируемость

Ключевым компонентом масштабирования в нескольких облаках является возможность предоставления масштабирования по запросу. Масштабирование должно осуществляться между общедоступной и локальной облачными инфраструктурами и обеспечивать согласованное надежное обслуживание по запросу.

### <a name="availability"></a>Доступность

Убедитесь, что локально развернутые приложения настроены для обеспечения высокой доступности с помощью конфигурации локального оборудования и развертывания программного обеспечения.

### <a name="manageability"></a>Управляемость

Шаблон для нескольких облаков обеспечивают простое управление и привычный интерфейс между средами.

## <a name="when-to-use-this-pattern"></a>Когда следует использовать этот шаблон

Используйте этот шаблон в следующих случаях:

- Если вам нужно увеличить емкость приложения при непредвиденных или периодических увеличениях нагрузки.
- Если вы не хотите инвестировать средства в ресурсы, которые будут использоваться только во время пиковых нагрузок. Платите только за те ресурсы, которые используете.

Этот шаблон не рекомендуется использовать в следующих случаях:

- Для решения требуется подключение пользователей через Интернет.
- Для вашего предприятия действуют местные нормы, требующие, чтобы исходное подключение поступало от вызова на месте.
- В сети возникают обычные узкие места, которые ограничивают эффективность масштабирования.
- Ваша среда изолирована от Интернета и ее нельзя подключать к общедоступному облаку.

## <a name="next-steps"></a>Дальнейшие действия

Дополнительные сведения по темам, описанным в этой статье:

- Дополнительные сведения о работе балансировщика нагрузки трафика на основе DNS см. в статье с [общими сведениями о диспетчере трафика Azure](/azure/traffic-manager/traffic-manager-overview).
- См. [рекомендации по проектированию гибридных приложений и ответы на дополнительные вопросы](overview-app-design-considerations.md).
- См. сведения обо [всех продуктах и решениях Azure Stack](/azure-stack).

Когда вы будете готовы протестировать пример решения, продолжите работу с [руководством по развертыванию решения масштабирования в нескольких облаках](/azure/architecture/hybrid/deployments/solution-deployment-guide-cross-cloud-scaling). В этом руководстве содержатся пошаговые инструкции по развертыванию и тестированию компонентов. Вы узнали, как создать решение для работы в нескольких облаках с активируемым вручную процессом переключения с веб-приложения, размещенного в Azure Stack Hub, на веб-приложение, размещенное в Azure. Вы также узнаете, как использовать автоматическое масштабирование с помощью диспетчера трафика, обеспечивая гибкую и масштабируемую облачную служебную программу для работы под нагрузкой.